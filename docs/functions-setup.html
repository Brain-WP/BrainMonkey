<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Giuseppe Mazzapica">
    <title>PHP Functions / Setup Brain Monkey. Brain Monkey</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
    <link href="http://giuseppe-mazzapica.github.io/BrainMonkey/css/theme.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

      <!-- Sidebar -->
      <div id="sidebar-wrapper">

          <div class="logo">
              <a href="http://giuseppe-mazzapica.github.io/BrainMonkey">
                <img src="http://giuseppe-mazzapica.github.io/BrainMonkey/images/brain-monkey-80.png" alt="Brain Monkey">
                <span>Brain Monkey</span>
              </a>
          </div>

          <ul class="sidebar-nav">
                                                  <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Getting Started</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/installation.html">
                                      Installation
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/what-and-why.html">
                                      What & Why
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> PHP Functions</a>
                      <ul>
                                                        <li class="active">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/functions-setup.html">
                                      Setup
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/functions-when.html">
                                      Patching with when()
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/functions-expect.html">
                                      Testing with expect()
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> WordPress</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/wordpress-why-bother.html">
                                      Why Bother
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/wordpress-setup.html">
                                      Setup
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/wordpress-tools.html">
                                      WordPress Testing Tools
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/wordpress-hooks-added.html">
                                      Testing Added Hooks
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/BrainMonkey/docs/wordpress-hooks-fired.html">
                                      Testing Fired Hooks
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                        </ul>

      </div>
      <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper" class="content-wrapper-">
            <div class="container-fluid">
                <div class="row">
                    <div id="content" class="col-lg-11">
                                                                                <ol class="breadcrumb">
                              <li><a href="http://giuseppe-mazzapica.github.io/BrainMonkey">Brain Monkey</a></li>
                              <li class="active">PHP Functions</li>
                            </ol>
                                                                                                        <!--
currentMenu: "functionsetup"
currentSection: "PHP Functions"
title: "Setup Brain Monkey"
-->
<h1>Testing PHP Functions: Setup Brain Monkey</h1>
<h2>Testing framework agnostic</h2>
<p>Brain Monkey can be used with any testing framework.
Examples in this page will use PHPUnit, but the concepts are applicable at any testing framework.</p>
<h2>Setup tests</h2>
<p>After Brain Monkey is part of the project (see <em>Getting Started / Installation</em>), to be able to use its features
you need to <strong>require vendor autoload file</strong> before running tests (e.g. PHPUnit users will probably require it in their bootstrap file).</p>
<p>After that you need to call a method <em>before</em> any test, and another <em>after</em> any test.</p>
<p>These two methods are:</p>
<ul>
<li><code>Brain\Monkey\Functions\setUp()</code> has to be run before any test</li>
<li><code>Brain\Monkey\Functions\tearDown()</code> has to be run after any test</li>
</ul>
<h3>PHPUnit example</h3>
<p>Let's take PHPUnit as example, the average test case class that uses Brain Monkey would be something like:</p>
<pre><code class="language-php">use PHPUnit_Framework_TestCase;
use Brain\Monkey\Functions;

class MyTestCase extends PHPUnit_Framework_TestCase
{

    protected function setUp()
    {
        parent::setUp();
        Functions::setUp();
    }

    protected function tearDown()
    {
        Functions::tearDown();
        parent::tearDown();
    }
}</code></pre>
<p>After that for all test classes can extend this class instead of directly extending <code>PHPUnit_Framework_TestCase</code>.</p>
<p>That's all. Again, I used PHPUnit for the example, but any testing framework can be used.</p>
<p>Now you are ready to start testing functions.</p>
<p>For the scope there are two entry-point methods of the <code>Functions</code> class: <strong><code>when()</code></strong> and <strong><code>expect()</code></strong>.
See dedicated doc pages.</p>
<h2>Namespaced functions</h2>
<p>All the code examples in this documentation make use of functions in global namespace.
However, note that namespaced functions are supported as well, just be sure to pass the fully qualified name of the function
to <code>Functions</code> methods:</p>
<pre><code class="language-php">Functions::expect('a_global_function');

Functions::expect('My\\App\\awesome_function()');</code></pre>
<h2>Note for WordPressers</h2>
<p>Anything said in this page is fine for WordPress functions too, they are PHP functions, after all.</p>
<p>However, Brain Monkey has specific features for WordPress, and there is a way to setup tests for <strong>all</strong> Brain Monkey features (WordPress-specific and not).</p>
<p>If you want to use Brain Monkey to test code wrote for WordPress, it is preferable to use the setup explained in the <em>"WordPress / Setup"</em> section
that <em>includes</em> the setup needed to use Brain Monkey tools for functions.</p>
                                            </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

                    <a href="https://github.com/Giuseppe-Mazzapica/BrainMonkey">
                <img style="position:fixed; top:0; right:0; border:0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
            </a>
                <a href="#" id="menu-toggle" title="Toggle Menu"><i class="fa fa-bars"></i></a>


    </div>
    <!-- /#wrapper -->

    <footer class="footer hidden-xs hidden-sm">
      Made by hands by
      <a href="http://gm.zoomlab.it/" title="Giuseppe Mazzapica Home Page" target="_blank">Giuseppe Mazzapica</a>, with
      <a href="http://couscous.io/" title="Couscous" target="_blank">Couscous</a>,
      <a href="http://getbootstrap.com/" title="Bootstrap" target="_blank">Bootstrap</a> &amp;
      <a href="https://highlightjs.org/" title="highlight.js" target="_blank">highlight.js</a>

      <span class="socials">
        <a href="https://github.com/Giuseppe-Mazzapica" title="GitHub" target="_blank"><i class="fa fa-github-alt"></i></a>
        <a href="https://twitter.com/gmazzap" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
        <a href="http://wordpress.stackexchange.com/users/35541/" title="Stack Exchange" target="_blank"><i class="fa fa-stack-exchange"></i></a>
      </span>

    </footer>

    <a href="#wrapper" class="hidden-xs hidden-sm" id="back-top" title="Back to top"><i class="fa fa-long-arrow-up"></i></a>
    <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
    <script src="http://giuseppe-mazzapica.github.io/BrainMonkey/js/theme.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-46467639-3', 'auto');
      ga('send', 'pageview');
    </script>
</body>

</html>
